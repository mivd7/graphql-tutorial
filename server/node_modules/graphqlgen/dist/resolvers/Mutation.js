"use strict";
exports.__esModule = true;
exports.Mutation = {
    createUser: function (parent, _a, ctx) {
        var name = _a.name;
        var id = ctx.data.idProvider();
        var newUser = { id: id, name: name, postIDs: [] };
        ctx.data.users.push(newUser);
        return newUser;
    },
    createDraft: function (parent, _a, ctx) {
        var title = _a.title, content = _a.content, authorId = _a.authorId;
        var author = ctx.data.users.find(function (user) { return user.id === authorId; });
        if (author === null) {
            throw new Error("User with ID '" + authorId + "' does not exist.");
        }
        var id = ctx.data.idProvider();
        var newDraft = { id: id, title: title, content: content, authorId: authorId, published: false };
        ctx.data.posts.push(newDraft);
        author.postIDs.push(id);
        return newDraft;
    },
    deletePost: function (parent, _a, ctx) {
        var id = _a.id;
        var postIndex = ctx.data.posts.findIndex(function (post) { return post.id === id; });
        if (postIndex < 0) {
            throw new Error("Post with ID '" + id + "' does not exist.");
        }
        var deleted = ctx.data.posts.splice(postIndex, 1);
        return deleted[0];
    },
    publish: function (parent, _a, ctx) {
        var id = _a.id;
        var post = ctx.data.posts.find(function (post) { return post.id === id; });
        post.published = true;
        return post;
    }
};
